# Team 20 Rob 535 Perception

## Prerequisites

* Python 3
* Pip
* Google Colab

In a terminal, run

```sh
pip install -r requirements.txt
```

## Usage

1. Download the trainval folder and place it in the same directory as this repo

2. In a terminal, run

```sh
mkdir cars
mkdir ./cars/train
mkdir ./cars/train/images
mkdir ./cars/train/labels
cp data.yaml ./cars/data.yaml
python process_data_for_yolov5.py
```

3. Create a new project on [Roboflow](https://app.roboflow.com/) and upload the cars folder from step 2 to the new Roboflow project.

4. Follow the instructions on Roboflow to preprocess the data and get it ready for training.

5. In a terminal, run

```sh
python process_test_for_yolov5.py
```

6. Upload the test folder generated by step 5 to a Google Drive. Create an empty folder called rob535 in the Google Drive.

7. Open team20_perception.ipynb from Google Colab and connect to a runtime with GPU.

8. Run all cells in the Google Colab notebook to train and detect. Follow instructions in the notebook to connect with Google Drive. The training should take about 6 hours.

9. Download the exp folder inside rob535, which should contain the prediction results.

10. Move the exp folder to the same directory as this repo, run the following script in a terminal to generate the csv to submit.

```sh
python format_test_results.py
```

## Acknowledgement

We are using the [YOLOv5](https://github.com/ultralytics/yolov5) architecture for object detection. We modified the architecture before using it. As you can see in our Google Colab notebook, we added another upsampling and concatenating layers to the YOLOv5 head.
